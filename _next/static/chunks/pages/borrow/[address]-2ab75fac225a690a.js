(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[328],{7285:function(e,n,t){"use strict";var s;Object.defineProperty(n,"__esModule",{value:!0}),n.AmpStateContext=void 0;var a=((s=t(7294))&&s.__esModule?s:{default:s}).default.createContext({});n.AmpStateContext=a},9546:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isInAmpMode=i,n.useAmp=function(){return i(a.default.useContext(r.AmpStateContext))};var s,a=(s=t(7294))&&s.__esModule?s:{default:s},r=t(7285);function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.ampFirst,t=void 0!==n&&n,s=e.hybrid,a=void 0!==s&&s,r=e.hasQuery,i=void 0!==r&&r;return t||a&&i}},6505:function(e,n,t){"use strict";var s=t(930);function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.defaultHead=u,n.default=void 0;var r,i=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};s.get||s.set?Object.defineProperty(n,t,s):n[t]=e[t]}return n.default=e,n}(t(7294)),l=(r=t(8252))&&r.__esModule?r:{default:r},o=t(7285),c=t(523),d=t(9546);t(7206);function u(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[i.default.createElement("meta",{charSet:"utf-8"})];return e||n.push(i.default.createElement("meta",{name:"viewport",content:"width=device-width"})),n}function f(e,n){return"string"===typeof n||"number"===typeof n?e:n.type===i.default.Fragment?e.concat(i.default.Children.toArray(n.props.children).reduce((function(e,n){return"string"===typeof n||"number"===typeof n?e:e.concat(n)}),[])):e.concat(n)}var x=["name","httpEquiv","charSet","itemProp"];function m(e,n){return e.reduce((function(e,n){var t=i.default.Children.toArray(n.props.children);return e.concat(t)}),[]).reduce(f,[]).reverse().concat(u(n.inAmpMode)).filter(function(){var e=new Set,n=new Set,t=new Set,s={};return function(a){var r=!0,i=!1;if(a.key&&"number"!==typeof a.key&&a.key.indexOf("$")>0){i=!0;var l=a.key.slice(a.key.indexOf("$")+1);e.has(l)?r=!1:e.add(l)}switch(a.type){case"title":case"base":n.has(a.type)?r=!1:n.add(a.type);break;case"meta":for(var o=0,c=x.length;o<c;o++){var d=x[o];if(a.props.hasOwnProperty(d))if("charSet"===d)t.has(d)?r=!1:t.add(d);else{var u=a.props[d],f=s[d]||new Set;"name"===d&&i||!f.has(u)?(f.add(u),s[d]=f):r=!1}}}return r}}()).reverse().map((function(e,t){var r=e.key||t;if(!n.inAmpMode&&"link"===e.type&&e.props.href&&["https://fonts.googleapis.com/css","https://use.typekit.net/"].some((function(n){return e.props.href.startsWith(n)}))){var l=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},e.props||{});return l["data-href"]=l.href,l.href=void 0,l["data-optimized-fonts"]=!0,i.default.cloneElement(e,l)}return i.default.cloneElement(e,{key:r})}))}var p=function(e){var n=e.children,t=i.useContext(o.AmpStateContext),s=i.useContext(c.HeadManagerContext);return i.default.createElement(l.default,{reduceComponentsToState:m,headManager:s,inAmpMode:d.isInAmpMode(t)},n)};n.default=p},8252:function(e,n,t){"use strict";var s=t(7980),a=t(3227),r=t(8361),i=(t(2191),t(5971)),l=t(2715),o=t(1193);function c(e){var n=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,s=o(e);if(n){var a=o(this).constructor;t=Reflect.construct(s,arguments,a)}else t=s.apply(this,arguments);return l(this,t)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var d=function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var s=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};s.get||s.set?Object.defineProperty(n,t,s):n[t]=e[t]}return n.default=e,n}(t(7294));var u=function(e){i(t,e);var n=c(t);function t(e){var r;return a(this,t),(r=n.call(this,e)).emitChange=function(){r._hasHeadManager&&r.props.headManager.updateHead(r.props.reduceComponentsToState(s(r.props.headManager.mountedInstances),r.props))},r._hasHeadManager=r.props.headManager&&r.props.headManager.mountedInstances,r}return r(t,[{key:"componentDidMount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.add(this),this.emitChange()}},{key:"componentDidUpdate",value:function(){this.emitChange()}},{key:"componentWillUnmount",value:function(){this._hasHeadManager&&this.props.headManager.mountedInstances.delete(this),this.emitChange()}},{key:"render",value:function(){return null}}]),t}(d.Component);n.default=u},2020:function(e,n,t){"use strict";t.r(n);var s=t(9499),a=t(6835),r=t(29),i=t(5988),l=t.n(i),o=t(7794),c=t.n(o),d=t(1744),u=t(2593),f=t(9008),x=t(7294),m=t(5453),p=t(1101),j=t(2563),h=t(6594),v=t(5893);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,s)}return t}function y(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,s.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var g="Borrow - ".concat(m.iC),N=function(e){var n,t=e.address,s=(0,m.mA)(),a=(0,h.v9)((function(e){return e.pools[t]})),r=null===(n=m.D.find((function(e){return e.address===t})))||void 0===n?void 0:n.name,i=(0,v.jsxs)(f.default,{children:[(0,v.jsx)("title",{children:g}),(0,v.jsx)("link",{rel:"icon",href:"".concat(m.O4,"/favicon.svg")})]});return a?(0,v.jsxs)(p.T3,{children:[i,(0,v.jsx)(p.VB,{href:"/borrow"}),(0,v.jsx)("h1",{children:r}),(0,v.jsx)(w,{pool:a,poolAddress:t,account:s}),(0,v.jsx)(O,{pool:a,poolAddress:t,account:s}),(0,v.jsx)(D,{pool:a,poolAddress:t,account:s})]}):(0,v.jsx)(p.SX,{children:i})};function O(e){var n=e.pool,t=n.loanDeskAddress,s=n.liquidityTokenDecimals,i=n.block,o=e.poolAddress,u=e.account,f=(0,m.yL)(),b=(0,h.I0)(),y=(0,x.useState)(null),g=y[0],N=y[1],O=(0,x.useRef)();(0,x.useEffect)((function(){if(u!==O.current&&(O.current=u,u)){var e=j.Ed.attach(t).connect(f);e.queryFilter(e.filters.LoanOffered(null,u),i).then(function(){var n=(0,r.Z)(c().mark((function n(s){var r,i,l,o,d,f;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s.length){n.next=2;break}return n.abrupt("return");case 2:return s.sort((function(e,n){return n.args.applicationId.toNumber()-e.args.applicationId.toNumber()})),r=s[0].args.applicationId,n.next=6,e.loanApplications(r);case 6:if((i=n.sent).status===j.WR.OFFER_MADE){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,Promise.all([e.loanOffers(r),fetch("".concat(m.g9,"/profile/").concat(i.profileId)).then((function(e){return e.json()}))]);case 11:l=n.sent,o=(0,a.Z)(l,2),d=o[0],f=o[1],N({details:d,account:u,loanDeskAddress:t,contactDetails:f||{}});case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){console.error(e)}))}}),[u,i,t,f]);var w=(0,x.useState)(!1),k=w[0],A=w[1],D=(0,x.useState)(!1),P=D[0],S=D[1];return g&&g.account===u&&g.loanDeskAddress===t?(0,v.jsxs)(p.xu,{className:"loan-offer",overlay:P?(0,v.jsx)("h2",{className:"jsx-1350981446",children:"Funds withdrawn!"}):null,children:[(0,v.jsx)("h3",{className:"jsx-1350981446",children:"Offer Received"}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Amount"}),(0,v.jsxs)("div",{className:"jsx-1350981446",children:[(0,m.WU)((0,d.formatUnits)(g.details.amount,s))," ",m.ob]})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Installment amount"}),(0,v.jsxs)("div",{className:"jsx-1350981446",children:[(0,m.WU)((0,d.formatUnits)(g.details.installmentAmount,s))," ",m.ob]})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Installments"}),(0,v.jsx)("div",{className:"jsx-1350981446",children:g.details.installments})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Duration"}),(0,v.jsxs)("div",{className:"jsx-1350981446",children:[g.details.duration.toNumber()/m.L$," months"]})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Interest APR"}),(0,v.jsxs)("div",{className:"jsx-1350981446",children:[g.details.apr/10,"%"]})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Grace Default Period"}),(0,v.jsxs)("div",{className:"jsx-1350981446",children:[g.details.gracePeriod.toNumber()/m.u3," days"]})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Name"}),(0,v.jsx)("div",{className:"jsx-1350981446",children:g.contactDetails.name})]}),(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Business Name"}),(0,v.jsx)("div",{className:"jsx-1350981446",children:g.contactDetails.businessName})]}),g.contactDetails.phone?(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Phone"}),(0,v.jsx)("div",{className:"jsx-1350981446",children:(0,v.jsx)("a",{href:"tel:".concat(g.contactDetails.phone),className:"jsx-1350981446",children:g.contactDetails.phone})})]}):null,g.contactDetails.email?(0,v.jsxs)("div",{className:"jsx-1350981446 field",children:[(0,v.jsx)("div",{className:"jsx-1350981446 label",children:"Email"}),(0,v.jsx)("div",{className:"jsx-1350981446",children:(0,v.jsx)("a",{href:"mailto:".concat(g.contactDetails.email),className:"jsx-1350981446",children:g.contactDetails.email})})]}):null,(0,v.jsx)(p.zx,{disabled:P||k,loading:k,type:"submit",onClick:(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.prev=1,e.next=4,j.LJ.attach(o).connect(f.getSigner()).borrow(g.details.applicationId).then((function(e){return(0,j.y5)(b,{tx:e,name:"Accept loan & withdraw"})}));case 4:S(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error(e.t0);case 10:A(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),children:"Accept Loan & Withdraw Funds"}),(0,v.jsx)(l(),{id:"1350981446",children:[".loan-offer>button{margin-top:16px;}",".loan-offer>h3{margin-top:0;}",".field.jsx-1350981446{margin-top:16px;}",".field.jsx-1350981446>.label.jsx-1350981446{color:var(--color-secondary);font-weight:400;margin-bottom:8px;}"]})]}):null}function w(e){var n=e.pool,t=e.poolAddress,s=e.account,a=(0,m.yL)();return(0,j.q4)(t,s).filter((function(e){return e.status===j.kK.OUTSTANDING})).sort((function(e,n){return n.id-e.id})).map((function(e){return(0,v.jsx)(k,{pool:n,poolAddress:t,loan:e,provider:a},e.id)}))}function k(e){var n=e.pool,t=n.liquidityTokenDecimals,s=n.loanDeskAddress,a=e.poolAddress,r=e.loan,i=e.provider,o=(0,h.I0)(),c=(0,x.useState)(""),f=c[0],b=c[1],g=(0,m.NH)(r.amount,r.apr,r.borrowedTime),N=(0,x.useMemo)((function(){var e=u.O$.from(r.details.totalAmountRepaid);return{debt:g.sub(e),repaid:e}}),[r,g]),O=N.debt,w=N.repaid,k=(0,x.useState)(null),A=k[0],D=k[1],P=A&&A.applicationId===r.applicationId?A:null;(0,x.useEffect)((function(){j.Ed.connect(i).attach(s).loanApplications(r.applicationId).then((function(e){var n=e.profileId;return fetch("".concat(m.g9,"/profile/").concat(n))})).then((function(e){return e.json()})).then((function(e){return D(y(y({},e),{},{applicationId:r.applicationId}))}))}),[r,s,i]);var S=(0,x.useState)(!1),M=S[0],C=S[1],_=(0,x.useCallback)((function(e){e.preventDefault(),C(!0),j.LJ.connect(i.getSigner()).attach(a).repay(u.O$.from(r.id),(0,d.parseUnits)(f,t)).then((function(e){return(0,j.y5)(o,{tx:e,name:"Repay loan"})})).then((function(){return o((0,j.vy)({poolAddress:a,loanId:r.id}))})).then((function(){C(!1),b("")})).catch((function(e){console.error(e)}))}),[i,a,r,f,t,o]);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(p.xu,{children:[(0,v.jsx)("h2",{className:"jsx-1374927993",children:"Loan Status"}),(0,v.jsx)("div",{className:"jsx-1374927993 stats",children:(0,v.jsxs)("div",{className:"jsx-1374927993 stat",children:[(0,v.jsx)("div",{className:"jsx-1374927993 label",children:"Outstanding"}),(0,v.jsxs)("div",{className:"jsx-1374927993 value",children:[(0,m.WU)((0,d.formatUnits)(O,t))," ",m.ob]})]})})]}),(0,v.jsxs)("form",{onSubmit:_,className:"jsx-1374927993 main",children:[(0,v.jsxs)(p.xu,{className:"repay",children:[(0,v.jsx)("h2",{className:"jsx-1374927993",children:"Repay Loan"}),(0,v.jsx)(p._Z,{decimals:t,value:f,onChange:b}),(0,v.jsx)(p.zx,{type:"submit",loading:M,disabled:M,children:"Repay"}),(0,v.jsx)(p.bZ,{style:"warning",title:"Late payments will affect your on chain credit rating"})]}),(0,v.jsxs)(p.xu,{className:"details",children:[(0,v.jsx)("h3",{className:"jsx-1374927993",children:"Loan Contract Details"}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Initial loan amount:"})," ",(0,m.WU)((0,d.formatUnits)(r.amount,t))," ",m.ob]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Repaid:"})," ",(0,m.WU)((0,d.formatUnits)(w,t))," ",m.ob]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Total interest paid:"})," ",(0,m.WU)((0,d.formatUnits)(r.details.interestPaid,t))," ",m.ob]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Duration:"})," ",r.duration/m.L$," months"]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Interest APR:"})," ",r.apr,"%"]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Grace default period:"})," ",r.gracePeriod/m.u3," days"]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Name:"})," ",null===P||void 0===P?void 0:P.name]}),(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Business name:"})," ",null===P||void 0===P?void 0:P.businessName]}),null!==P&&void 0!==P&&P.phone?(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Phone:"})," ",(0,v.jsx)("a",{href:"tel:".concat(P.phone),className:"jsx-1374927993",children:P.phone})]}):null,null!==P&&void 0!==P&&P.email?(0,v.jsxs)("div",{className:"jsx-1374927993 field",children:[(0,v.jsx)("span",{className:"jsx-1374927993 label",children:"Email:"})," ",(0,v.jsx)("a",{href:"mailto:".concat(P.email),className:"jsx-1374927993",children:P.email})]}):null]})]}),(0,v.jsx)(l(),{id:"1374927993",children:["h2.jsx-1374927993,h3.jsx-1374927993{margin-top:0;margin-bottom:16px;}",".stats.jsx-1374927993>.stat.jsx-1374927993>.label.jsx-1374927993{color:var(--color-secondary);font-weight:400;margin-bottom:8px;}",".stats.jsx-1374927993>.stat.jsx-1374927993>.value.jsx-1374927993{font-weight:700;font-size:24px;}",".main.jsx-1374927993>.repay button{margin-top:8px;margin-bottom:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}",".details>.field.jsx-1374927993{margin-top:8px;}",".details>.field.jsx-1374927993>.label.jsx-1374927993{color:var(--color-secondary);font-weight:400;margin-bottom:8px;}","@media screen and (min-width:1000px){.main.jsx-1374927993{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.main.jsx-1374927993>.box{-webkit-flex-basis:50%;-ms-flex-preferred-size:50%;flex-basis:50%;margin:0;}.main.jsx-1374927993>.box:first-child{margin-right:8px;}.main.jsx-1374927993>.box:last-child{margin-left:8px;}}"]})]})}N.getInitialProps=function(e){return{address:(0,m.Kn)(e.query.address)}},n.default=N;var A=52*(7*m.u3)+m.u3;function D(e){var n=e.pool,t=n.managerAddress,s=n.loanDeskAddress,a=n.liquidityTokenDecimals,r=e.poolAddress,i=e.account,o=(0,m.yL)(),c=(0,h.I0)(),f=(0,x.useState)(false),b=f[0],y=f[1],g=(0,x.useCallback)((function(){return y(!0)}),[]),N=(0,x.useState)(!1),O=N[0],w=N[1];(0,x.useEffect)((function(){i&&w(!1)}),[i]);var k=(0,x.useState)(!1),D=k[0],M=k[1],C=(0,x.useState)(!1),_=C[0],E=C[1],I=(0,x.useState)(null),L=I[0],R=I[1],U=(0,x.useRef)();(0,x.useEffect)((function(){i!==U.current&&(U.current=i,i&&j.Ed.attach(s).connect(o).borrowerStats(i).then((function(e){var n=e.hasOpenApplication;R({hasOpenApplication:n,account:i,loanDeskAddress:s})})).catch((function(e){console.error(e)})))}),[i,s,o]);var B=L&&L.hasOpenApplication&&L.account===i&&s===L.loanDeskAddress,T=(0,j.E3)(r,s),q=(0,x.useState)(""),W=q[0],F=q[1],Z=(0,x.useState)(""),$=Z[0],z=Z[1],H=(0,x.useState)(""),G=H[0],J=H[1],K=(0,x.useState)(""),X=K[0],V=K[1],Q=(0,x.useRef)(null),Y=(0,x.useState)(""),ee=Y[0],ne=Y[1],te=(0,x.useState)(""),se=te[0],ae=te[1],re=m.L$,ie=(0,x.useMemo)((function(){if(!T)return{invalidAmountMessage:"",invalidDurationMessage:""};var e=Number(se)*Number(re),n=e<T.minLoanDuration,t=e>T.maxLoanDuration;return{invalidAmountMessage:S(ee,a,T.minLoanAmount)?"":"Minimum amount is ".concat((0,m.WU)((0,d.formatUnits)(u.O$.from(T.minLoanAmount),a))),invalidDurationMessage:n?"Minimum duration is ".concat(T.minLoanDuration/m.u3," day"):t?"Maximum duration is ".concat(T.maxLoanDuration/A," years"):""}}),[T,se,re,a,ee]),le=ie.invalidAmountMessage,oe=ie.invalidDurationMessage,ce=(0,x.useMemo)((function(){var e;return P(W)?P($)?P(X)||P(G)?null!==(e=Q.current)&&void 0!==e&&e.checkValidity()?B?"x":le||oe||null:"Invalid email":"Please enter an email or phone number":"Please enter your business name":"Please enter your name"}),[$,X,le,oe,B,W,G]),de=t===i,ue=!T||Boolean(i&&!L),fe=de||ue,xe=Boolean(D||fe||!ee||ce||_),me=(0,x.useCallback)((function(e){if(e.preventDefault(),i){if(!xe){M(!0);var n=(0,d.parseUnits)(ee,a),t=u.O$.from(Number(se)*Number(re)),r=o.getSigner();r.signMessage("My name is ".concat(W.trim(),".\nMy business name is ").concat($.trim(),".").concat(G?"\nMy phone is ".concat(G.trim(),"."):"").concat(X?"\nMy email is ".concat(X.trim(),"."):"")).then((function(e){return fetch("".concat(m.g9,"/profile"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:W,businessName:$,phone:G,email:X,walletSignature:e,walletAddress:i.toLowerCase()})})})).then((function(e){return e.json()})).then((function(e){var a=e.id,i=e.digest;return j.Ed.attach(s).connect(r).requestLoan(n,t,a,i)})).then((function(e){return(0,j.y5)(c,{name:"Request loan for ".concat(ee," ").concat(m.ob),tx:e})})).then((function(){E(!0),M(!1)})).catch((function(e){console.error(e),M(!1)}))}}else w(!0)}),[i,$,xe,c,se,re,X,a,s,W,G,o,ee]);return(0,v.jsxs)(p.xu,{loading:ue,overlay:de?"Manager can't request a loan":B?"A loan application you requested is pending approval":_?(0,v.jsxs)("div",{className:"jsx-3003883118",children:[(0,v.jsx)("h2",{className:"jsx-3003883118",children:"Thank you for applying!"}),(0,v.jsx)("h2",{className:"jsx-3003883118",children:"The pool manager will be in touch shortly."})]}):void 0,children:[(0,v.jsx)(l(),{id:"3003883118",children:["form.jsx-3003883118>h3.jsx-3003883118{margin:0;}","form.jsx-3003883118>label.jsx-3003883118{display:block;margin-top:16px;}","form.jsx-3003883118>label.jsx-3003883118>.label.jsx-3003883118{color:var(--color-secondary);font-weight:400;margin-bottom:8px;}","form.jsx-3003883118>.alert-positioner.jsx-3003883118{margin-top:16px;}","form.jsx-3003883118>.alert-positioner.jsx-3003883118>.alert{width:100%;}","form.jsx-3003883118>.button-container.jsx-3003883118{margin-top:16px;position:relative;display:table;}","form.jsx-3003883118>.button-container.jsx-3003883118>.clickable.jsx-3003883118{position:absolute;top:0;left:0;width:100%;height:100%;cursor:not-allowed;}","@media screen and (min-width:800px){form.jsx-3003883118 .info.jsx-3003883118>.item.jsx-3003883118{-webkit-flex-basis:60%;-ms-flex-preferred-size:60%;flex-basis:60%;}form.jsx-3003883118 .info.jsx-3003883118>.item.jsx-3003883118:first-child{-webkit-flex-basis:25%;-ms-flex-preferred-size:25%;flex-basis:25%;}}"]}),(0,v.jsxs)("form",{onSubmit:me,className:"jsx-3003883118",children:[(0,v.jsx)("h3",{className:"jsx-3003883118",children:"Apply For a Loan"}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Account"}),(0,v.jsx)("input",{type:"text",required:Boolean(i),disabled:!0,value:i?(0,m.Xn)(i):"",className:"jsx-3003883118"})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Name"}),(0,v.jsx)("input",{type:"text",required:Boolean(i),placeholder:"John Smith",value:W,onChange:function(e){return F(e.target.value)},onBlur:function(){return!P(W)&&y(!0)},className:"jsx-3003883118"})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Business Name"}),(0,v.jsx)("input",{type:"text",required:Boolean(i),placeholder:"Green LLC",value:$,onChange:function(e){return z(e.target.value)},onBlur:function(){return!P($)&&y(!0)},className:"jsx-3003883118"})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Phone"}),(0,v.jsx)("input",{type:"tel",placeholder:"+1 (555) 343-3411",value:G,onChange:function(e){return J(e.target.value)},onBlur:function(){return!P(X)&&!P(G)&&y(!0)},className:"jsx-3003883118"})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Email"}),(0,v.jsx)("input",{ref:Q,type:"email",placeholder:"johnsmith@gmail.com",value:X,onChange:function(e){return V(e.target.value)},onBlur:function(){var e;return(!P(X)&&!P(G)||!(null!==(e=Q.current)&&void 0!==e&&e.checkValidity()))&&y(!0)},className:"jsx-3003883118"})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Amount"}),(0,v.jsx)(p._Z,{decimals:a,value:ee,onChange:ne,disabled:fe,onBlur:function(){return!S(ee,a,T.minLoanAmount)&&y(!0)},onKeyDown:function(e){return"Enter"===e.key?!S(ee,a,T.minLoanAmount)&&y(!0):void 0}})]}),(0,v.jsxs)("label",{className:"jsx-3003883118",children:[(0,v.jsx)("div",{className:"jsx-3003883118 label",children:"Duration"}),(0,v.jsx)(p._Z,{decimals:4,value:se,onChange:ae,onBlur:g,disabled:fe,noToken:!0,label:"months",paddingRight:60,onKeyDown:function(e){return"Enter"===e.key?y(!0):void 0}})]}),b&&ce?(0,v.jsx)("div",{className:"jsx-3003883118 alert-positioner",children:(0,v.jsx)(p.bZ,{style:"error-filled",title:ce})}):null,(0,v.jsxs)("div",{className:"jsx-3003883118 button-container",children:[(0,v.jsx)(p.zx,{type:"submit",disabled:!!i&&xe,loading:D,children:i?"Request Loan":"Connect Wallet"}),i&&xe?(0,v.jsx)("div",{onClick:g,className:"jsx-3003883118 clickable"}):null]})]}),O?(0,v.jsx)(p.Ot,{onClose:function(){return w(!1)}}):null]})}function P(e){return Boolean(e.trim())}function S(e,n,t){return!!e&&(0,d.parseUnits)(e,n).gte(t)}},4713:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/borrow/[address]",function(){return t(2020)}])},9008:function(e,n,t){e.exports=t(6505)}},function(e){e.O(0,[774,888,179],(function(){return n=4713,e(e.s=n);var n}));var n=e.O();_N_E=n}]);