(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[867],{6776:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(29),a=n(5988),o=n.n(a),i=n(7794),u=n.n(i),c=n(5553),s=n(9008),l=n(7294),f=n(9473),d=["second","minute","hour","day","week","month","year"];var p=["\u79d2","\u5206\u949f","\u5c0f\u65f6","\u5929","\u5468","\u4e2a\u6708","\u5e74"];var h={},m=function(e,t){h[e]=t},v=function(e){return h[e]||h.en_US},x=[60,60,24,7,365/7/12,12];function j(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}function g(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),a=0;e>=x[a]&&a<x.length;a++)e/=x[a];return(e=Math.floor(e))>(0===(a*=2)?9:1)&&(a+=1),t(e,a,r)[n].replace("%s",e.toString())}function b(e,t){return(+(t?j(t):new Date)-+j(e))/1e3}var y="timeago-id";function w(e){return parseInt(e.getAttribute(y))}var k={},_=function(e){clearTimeout(e),delete k[e]};function O(e,t,n,r){_(w(e));var a=r.relativeDate,o=r.minInterval,i=b(t,a);e.innerText=g(i,n);var u=setTimeout((function(){O(e,t,n,r)}),Math.min(1e3*Math.max(function(e){for(var t=1,n=0,r=Math.abs(e);e>=x[n]&&n<x.length;n++)e/=x[n],t*=x[n];return r=(r%=t)?t-r:t,Math.ceil(r)}(i),o||1),2147483647));k[u]=0,function(e,t){e.setAttribute(y,t)}(e,u)}function S(e){e?_(w(e)):Object.keys(k).forEach(_)}m("en_US",(function(e,t){if(0===t)return["just now","right now"];var n=d[Math.floor(t/2)];return e>1&&(n+="s"),[e+" "+n+" ago","in "+e+" "+n]})),m("zh_CN",(function(e,t){if(0===t)return["\u521a\u521a","\u7247\u523b\u540e"];var n=p[~~(t/2)];return[e+" "+n+"\u524d",e+" "+n+"\u540e"]}));var N=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},L.apply(this,arguments)},A=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dom=null,t}return N(t,e),t.prototype.componentDidMount=function(){this.renderTimeAgo()},t.prototype.componentDidUpdate=function(){this.renderTimeAgo()},t.prototype.renderTimeAgo=function(){var e,t=this.props,n=t.live,r=t.datetime,a=t.locale,o=t.opts;S(this.dom),!1!==n&&(this.dom.setAttribute("datetime",""+((e=r)instanceof Date?e.getTime():e)),function(e,t,n){var r=e.length?e:[e];r.forEach((function(e){O(e,function(e){return e.getAttribute("datetime")}(e),v(t),n||{})}))}(this.dom,a,o))},t.prototype.componentWillUnmount=function(){S(this.dom)},t.prototype.render=function(){var e=this,t=this.props,n=t.datetime,r=(t.live,t.locale),a=t.opts,o=A(t,["datetime","live","locale","opts"]);return l.createElement("time",L({ref:function(t){e.dom=t}},o),function(e,t,n){return g(b(e,n&&n.relativeDate),v(t))}(n,r,a))},t.defaultProps={live:!0,className:""},t}(l.PureComponent),T=P,C=n(6870),D=n(8940),M=n(5575),E=n(4739),U=n(3941),J=n(5893),q=function(){var e=(0,C.mA)(),t=(0,f.v9)(U.qo);return(0,J.jsxs)(D.T3,{children:[(0,J.jsxs)(s.default,{children:[(0,J.jsxs)("title",{className:"jsx-2162742380",children:["Earn - ",C.iC]}),(0,J.jsx)("meta",{name:"description",content:"",className:"jsx-2162742380"}),(0,J.jsx)("link",{rel:"icon",href:"/favicon.ico",className:"jsx-2162742380"})]}),t?t===e?(0,J.jsxs)(J.Fragment,{children:[(0,J.jsx)(z,{}),(0,J.jsx)(I,{}),(0,J.jsx)($,{})]}):(0,J.jsx)("h3",{className:"jsx-2162742380",children:"Login with manager wallet"}):(0,J.jsx)("h3",{className:"jsx-2162742380",children:"Loading\u2026"}),(0,J.jsx)(o(),{id:"2162742380",children:[".page>.section{max-width:300px;margin:10px auto;border:1px solid grey;border-radius:8px;text-align:center;padding:20px 0;}",".page>.section>h4{margin:0 0 10px;}",".page>.section>table{margin:0 auto;}","h3{text-align:center;}"]})]})};function z(){var e=(0,l.useState)(!1),t=e[0],n=e[1],a=(0,l.useState)("100"),o=a[0],i=a[1],s=(0,f.v9)(U.n2),d=(0,f.v9)(U.Cu),p=(0,C.mA)(),h=(0,C.yL)();if(!s||!p||!h||void 0===d)return null;return(0,J.jsxs)("form",{className:"section",onSubmit:function(e){e.preventDefault(),n(!0);var t=(0,c.vz)(o,d),a=h.getSigner();s.allowance(p,C.ez).then(function(){var e=(0,r.Z)(u().mark((function e(r){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.connect(a),e.next=3,o.balanceOf(p);case 3:if(!e.sent.lt(t)){e.next=8;break}return alert("USDC balance too low"),n(!1),e.abrupt("return");case 8:if(!t.gt(r)){e.next=13;break}return e.next=11,o.approve(C.ez,E.P);case 11:return e.next=13,(0,C.Vs)(500);case 13:return e.next=15,M.LJ.connect(a).stake(t);case 15:n(!1);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[(0,J.jsx)("h4",{children:"Stake"}),(0,J.jsx)("input",{type:"number",inputMode:"decimal",onChange:function(e){i(e.target.value)},value:o}),(0,J.jsx)("button",{disabled:t,children:"Stake"})]})}function I(){var e=(0,l.useState)(!1),t=e[0],n=e[1],a=(0,l.useState)("100"),o=a[0],i=a[1],s=(0,f.v9)(U.n2),d=(0,f.v9)(U.Cu),p=(0,C.mA)(),h=(0,C.yL)();if(!s||!p||!h||void 0===d)return null;return(0,J.jsxs)("form",{className:"section",onSubmit:function(e){e.preventDefault(),n(!0);var t=(0,c.vz)(o,d),a=h.getSigner();M.LJ.amountUnstakeable().then(function(){var e=(0,r.Z)(u().mark((function e(r){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.gt(r)){e.next=4;break}return alert("Maximum unstakable amount is ".concat((0,c.bM)(r,d))),n(!1),e.abrupt("return");case 4:return e.next=6,M.LJ.connect(a).unstake(t);case 6:n(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[(0,J.jsx)("h4",{children:"Unstake"}),(0,J.jsx)("input",{type:"number",inputMode:"decimal",onChange:function(e){i(e.target.value)},value:o}),(0,J.jsx)("button",{disabled:t,children:"Unstake"})]})}function $(){var e=(0,l.useState)(!0),t=e[0],n=e[1],a=(0,l.useState)((function(){return[]})),o=a[0],i=a[1],s=(0,f.v9)(U.n2),d=(0,f.v9)(U.Cu),p=(0,C.mA)(),h=(0,C.yL)(),m=(0,l.useRef)(!1);return(0,l.useEffect)((function(){m.current||(m.current=!0,M.LJ.queryFilter(M.LJ.filters.LoanRequested()).then(function(){var e=(0,r.Z)(u().mark((function e(t){var r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return M.LJ.loans(e.args.loanId)})));case 2:r=e.sent,i(r.filter((function(e){return e.status===M.kK.APPLIED}))),n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),s&&p&&h&&void 0!==d?(0,J.jsxs)("div",{className:"section",children:[(0,J.jsx)("h4",{children:"Loans pending approval"}),t&&(0,J.jsx)("h3",{children:"Loading\u2026"}),o.map((function(e){return(0,J.jsx)("table",{children:(0,J.jsxs)("tbody",{children:[(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Borrower"}),(0,J.jsx)("td",{children:(0,C.Xn)(e.borrower)})]}),(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Amount"}),(0,J.jsxs)("td",{children:[(0,c.bM)(e.amount,d)," ",C.ob]})]}),(0,J.jsxs)("tr",{children:[(0,J.jsx)("td",{children:"Requested"}),(0,J.jsx)("td",{children:(0,J.jsx)(T,{datetime:1e3*e.requestedTime.toNumber()})})]}),(0,J.jsx)("tr",{children:(0,J.jsx)("td",{colSpan:2,style:{paddingTop:10},children:(0,J.jsx)(D.zx,{onClick:function(){var t=e.id;M.LJ.connect(h.getSigner()).approveLoan(e.id).then((function(){i((function(e){return e.filter((function(e){return!e.id.eq(t)}))}))}))},children:"Approve"})})})]})},e.id.toNumber())}))]}):null}},4166:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage",function(){return n(6776)}])}},function(e){e.O(0,[955,774,888,179],(function(){return t=4166,e(e.s=t);var t}));var t=e.O();_N_E=t}]);